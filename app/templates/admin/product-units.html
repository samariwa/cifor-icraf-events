{% if current_user.has_role('SuperUser') %}
{% extends 'superuser/superuser_templates/base_superuser_template.html' %}
{% else %}
{% extends 'admin/admin_templates/base_admin_template.html' %}
{% endif %}

{% block head %}
<!-- Begin Page Content -->
<div class="container-fluid">

  <!-- Page Heading -->
  <div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800">Dashboard <span style="font-size: 18px;">/Stock</span> <span
        style="font-size: 15px;">/Inventory Units</span></h1>
    <h6 class="h6 mb-0 text-gray-600 mr-3">Time: <span id="time"></span></h6>
  </div>
  {% endblock %}

  {% block body %}
  <div class="row">
    <div class="col-md-4">
      <a href="/admin/product-unit-settings" class="btn btn-primary btn-md active " role="button" aria-pressed="true"><i
          class="fa fa-arrow-left"></i>&ensp;Back</a>
    </div>
    <div class="col-md-4">
      <h6 class="offset-3">Total Number: {{ units_count }}</h6>
    </div>
    <div class="col-md-4">
      <a data-toggle="modal" data-target="#exampleModalScrollable" class="btn btn-success btn-md active offset-8"
        role="button" aria-pressed="true"><i class="fa fa-plus-circle"></i>&ensp;Add Unit</a>
      <!-- Modal -->
      <div class="modal fade" id="exampleModalScrollable" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalScrollableTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalScrollableTitle">Add Inventory Unit</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form method="POST" id="form_add_unit">
                {{ add_unit_form.hidden_tag() }}
                <div class="row">
                  {{ add_unit_form.name }}
                </div>
            </div>
            <div class="modal-footer">
              {{ add_unit_form.submit }}
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div><br>
  <table id="productUnitsEditable" class="table table-striped table-hover paginate"
    style="display:block;overflow-y:scroll;text-align: center;">
    <thead class="thead-dark">
      <tr>
        <th scope="col" width="10%" style="text-align: left;">#</th>
        <th scope="col" width="40%">Unit Name</th>
        <th scope="col" width="30%">Measurement Mode</th>
        <th scope="col" width="20%">Status</th>
        <th scope="col" width="30%"></th>
      </tr>
    </thead>
    <tbody>
      {% for unit in product_units %}
      <tr>
        <th scope="row" class="uneditable" id="id{{ loop.index }}" style="text-align: left;">{{ unit.id }}</th>
        <td class="editable" id="unit{{ loop.index }}">{{ unit.unit_name }}</td>
        <td class="editable" id="mode{{ loop.index }}">{{ unit.measurement_mode }}</td>
        <td class="uneditable" id="status{{ loop.index }}">
          <div class="form-check form-switch ml-3">
              {% if unit.product_unit_status == 'active' %}
              <input class="form-check-input product_unit_status_checkbox" type="checkbox" id="flexSwitchCheckDefault" value="{{ unit.id }}" checked>
              {% else %}
              <input class="form-check-input product_unit_status_checkbox" type="checkbox" id="flexSwitchCheckDefault" value="{{ unit.id }}">
              {% endif %}
            </div>
      </td>
        <td>
          <button id="{{ unit.id }}" data_id="{{ unit.id }}" class="btn btn-danger btn-sm active deleteUnit"
            role="button" aria-pressed="true"><i class="fa fa-trash"></i>&ensp;Delete</button>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <!-- Scroll to Top Button-->
  {% endblock %}